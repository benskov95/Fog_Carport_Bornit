@startuml

Title Fog Carport
state flatorder.jsp

[*] --> index.jsp
index.jsp -right-> flatorder.jsp
flatorder.jsp -right-> receipt.jsp: Order a carport + (if necessary) register
receipt.jsp --> LoggedOnCustomer: Log in (if OK)
receipt.jsp --> index.jsp: Log in (if not OK)

LoggedOnCustomer --> index.jsp: Log out

state LoggedOnCustomer {
    state myorder.jsp
    state carportplan.jsp
    state carportplanside.jsp
    state bompage.jsp
    state checkoutpage.jsp

note top of myorder.jsp
customer, order
and BOM stored
in session
end note

    [*]--> myorder.jsp
    myorder.jsp --> carportplan.jsp: Drawing from bird's-eye view
    myorder.jsp --> carportplanside.jsp: Drawing from side view
    myorder.jsp --> bompage.jsp: Bill of materials (if order is purchased)
    myorder.jsp -up-> checkoutpage.jsp: When just purchased
}
@enduml